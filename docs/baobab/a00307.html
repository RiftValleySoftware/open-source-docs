<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BAOBAB: A_CO_DB Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BAOBAB
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00307.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="a00304.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">A_CO_DB Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for A_CO_DB:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00306.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Collaboration diagram for A_CO_DB:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00305.svg" width="212" height="431"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a523e2f40174a0bca0fc873d6286b3ae9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a523e2f40174a0bca0fc873d6286b3ae9">_instantiate_record</a> ( $in_db_result)</td></tr>
<tr class="separator:a523e2f40174a0bca0fc873d6286b3ae9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca49137c323f216a6704087ad30b01f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#aca49137c323f216a6704087ad30b01f1">__construct</a> ( $in_pdo_object, $in_access_object)</td></tr>
<tr class="separator:aca49137c323f216a6704087ad30b01f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2396849660aa4ff018ab7509a4badeb5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a> ( $in_sql, $in_parameters=NULL, $exec_only=false)</td></tr>
<tr class="separator:a2396849660aa4ff018ab7509a4badeb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b86c0613b521ffdbbd62f8928ad07f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a4b86c0613b521ffdbbd62f8928ad07f8">get_db_backup</a> ()</td></tr>
<tr class="separator:a4b86c0613b521ffdbbd62f8928ad07f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a707e7cfdbea32a3713320dbca46dac64"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a707e7cfdbea32a3713320dbca46dac64">get_access_class_by_id</a> ( $in_id)</td></tr>
<tr class="separator:a707e7cfdbea32a3713320dbca46dac64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6baed01812f38acbc19df4b00f443b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#af6baed01812f38acbc19df4b00f443b2">can_i_see_this_record</a> ( $in_id)</td></tr>
<tr class="separator:af6baed01812f38acbc19df4b00f443b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af62a0d273b69bdf1f5012f88e619cec7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#af62a0d273b69bdf1f5012f88e619cec7">get_single_raw_row_by_id</a> ( $in_id, $and_write=false)</td></tr>
<tr class="separator:af62a0d273b69bdf1f5012f88e619cec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a631d8d027d72c940a7cec689cbb4e568"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a631d8d027d72c940a7cec689cbb4e568">get_single_record_by_id</a> ( $in_id, $and_write=false)</td></tr>
<tr class="separator:a631d8d027d72c940a7cec689cbb4e568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca8bf49257aa5ade3c354ef76119fa4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#aaca8bf49257aa5ade3c354ef76119fa4">get_multiple_records_by_id</a> ( $in_id_array, $and_write=false)</td></tr>
<tr class="separator:aaca8bf49257aa5ade3c354ef76119fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ccca3e1b18f58a3d4a4ad6018f067b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a6ccca3e1b18f58a3d4a4ad6018f067b1">get_all_readable_records</a> ( $open_only=false, $in_this_id=NULL)</td></tr>
<tr class="separator:a6ccca3e1b18f58a3d4a4ad6018f067b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b39eabcd72a9d79267e51a5f2b16648"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a2b39eabcd72a9d79267e51a5f2b16648">get_all_writeable_records</a> ( $in_this_id=NULL)</td></tr>
<tr class="separator:a2b39eabcd72a9d79267e51a5f2b16648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afacdcd578ddc750ca33d2418b54ab6b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#afacdcd578ddc750ca33d2418b54ab6b9">lock_record</a> ( $in_record_id)</td></tr>
<tr class="separator:afacdcd578ddc750ca33d2418b54ab6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac7eadbd231d714f3eed150eec35838"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#acac7eadbd231d714f3eed150eec35838">write_record</a> ( $params_associative_array)</td></tr>
<tr class="separator:acac7eadbd231d714f3eed150eec35838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9794f1140b379f8d09c4265a089fcea0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a9794f1140b379f8d09c4265a089fcea0">delete_record</a> ( $id)</td></tr>
<tr class="separator:a9794f1140b379f8d09c4265a089fcea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a83fd5822487fa194ff0b617d90d747fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a83fd5822487fa194ff0b617d90d747fc">$access_object</a></td></tr>
<tr class="separator:a83fd5822487fa194ff0b617d90d747fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad57301d61a2e22a1e3f843fc8d71b690"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#ad57301d61a2e22a1e3f843fc8d71b690">$class_description</a></td></tr>
<tr class="separator:ad57301d61a2e22a1e3f843fc8d71b690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0195e339191feef610d1cdf09af95d84"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a0195e339191feef610d1cdf09af95d84">$error</a></td></tr>
<tr class="separator:a0195e339191feef610d1cdf09af95d84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256ce7dee5ecb0146b3974a762f02795"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a256ce7dee5ecb0146b3974a762f02795">$table_name</a></td></tr>
<tr class="separator:a256ce7dee5ecb0146b3974a762f02795"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a176b2c663fa7768e95e4fbe93281adc6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a176b2c663fa7768e95e4fbe93281adc6">_create_read_security_predicate</a> ()</td></tr>
<tr class="separator:a176b2c663fa7768e95e4fbe93281adc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4bc3d416f085818935b32a814313202"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#ad4bc3d416f085818935b32a814313202">_create_write_security_predicate</a> ()</td></tr>
<tr class="separator:ad4bc3d416f085818935b32a814313202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2356dbed1b38898d8c17bcd8eb405ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">_create_security_predicate</a> ( $write=false)</td></tr>
<tr class="separator:ad2356dbed1b38898d8c17bcd8eb405ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a6ff3c27bf8ac1bf1370aeeb6b7835d3c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#a6ff3c27bf8ac1bf1370aeeb6b7835d3c">$_pdo_object</a></td></tr>
<tr class="separator:a6ff3c27bf8ac1bf1370aeeb6b7835d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabeac345c845e7b7f481149b234641bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#aabeac345c845e7b7f481149b234641bb">$_existing_record_objects</a></td></tr>
<tr class="separator:aabeac345c845e7b7f481149b234641bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ae41efbdfe739934823b5f4c785b22611"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00307.html#ae41efbdfe739934823b5f4c785b22611">_execute_query</a> ( $in_sql, $in_parameters=NULL, $exec_only=false)</td></tr>
<tr class="separator:ae41efbdfe739934823b5f4c785b22611"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the abstract base class for both Badger databases. The bulk of database access, and most of the security, appears in this class.</p>
<p>The key to security is in the two protected _predicate methods (one for read, and one for write). These analyze the logged-in user's list of IDs (using the access class' get_security_ids() method, which reloads the security item), and construct an SQL predicate for calls that prevent records from being considered that do not match the security profile. This means the records are never even read into the object from the database. They are excluded by SQL. </p>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00050">50</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aca49137c323f216a6704087ad30b01f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca49137c323f216a6704087ad30b01f1">&#9670;&nbsp;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_pdo_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_access_object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The initializer </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_pdo_object</td><td>This is the PDO object used to access the database. It should be initialized and connected at the time this method is called. </td></tr>
    <tr><td class="paramname">$in_access_object</td><td>This is the access instance used to handle the login. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00266">266</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                  {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        $this-&gt;class_description = <span class="stringliteral">&#39;Abstract Base Class for Database -Should never be instantiated.&#39;</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        </div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        $this-&gt;access_object = $in_access_object;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        $this-&gt;error = NULL;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        $this-&gt;table_name = NULL;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        $this-&gt;_pdo_object = $in_pdo_object;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">if</span> (isset($this-&gt;_pdo_object)) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            $this-&gt;_pdo_object-&gt;owner_instance = $this;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        $this-&gt;_existing_record_objects = Array();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a176b2c663fa7768e95e4fbe93281adc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a176b2c663fa7768e95e4fbe93281adc6">&#9670;&nbsp;</a></span>_create_read_security_predicate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::_create_read_security_predicate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function creates an SQL predicate that limits the query to only those records to which the current logged-in user has read rights.</p>
<dl class="section return"><dt>Returns</dt><dd>a string, containing the SQL predicate </dd></dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00099">99</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>, and <a class="el" href="a00155_source.html#l00542">CO_Main_Data_DB\item_exists()</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                                         {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;access_object-&gt;god_mode()) {    <span class="comment">// God can do everything...</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            $access_ids = $this-&gt;access_object-&gt;get_security_ids();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            $ret = <span class="stringliteral">&#39;((read_security_id=0) OR (read_security_id IS NULL)&#39;</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            </div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">if</span> (isset($access_ids) &amp;&amp; is_array($access_ids) &amp;&amp; count($access_ids)) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                <span class="keywordflow">foreach</span> ($access_ids as $access_id) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    $ret .= <span class="stringliteral">&#39; OR (read_security_id=&#39;</span>.intval($access_id).<span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    $ret .= <span class="stringliteral">&#39; OR (write_security_id=&#39;</span>.intval($access_id).<span class="charliteral">&#39;)&#39;</span>;   <span class="comment">// Write security also means that we can read.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            $ret .= <span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        </div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="comment">// Only God can access God...</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">if</span> (($this instanceof <a class="code" href="a00327.html">CO_Security_DB</a>) &amp;&amp; !$this-&gt;access_object-&gt;god_mode()) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                $ret .= <span class="stringliteral">&#39; AND (id&lt;&gt;&#39;</span>.intval(CO_Config::god_mode_id()).<span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div><div class="ttc" id="a00327_html"><div class="ttname"><a href="a00327.html">CO_Security_DB</a></div><div class="ttdef"><b>Definition:</b> <a href="a00164_source.html#l00039">co_security_db.class.php:39</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00307_a176b2c663fa7768e95e4fbe93281adc6_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ad2356dbed1b38898d8c17bcd8eb405ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2356dbed1b38898d8c17bcd8eb405ef">&#9670;&nbsp;</a></span>_create_security_predicate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::_create_security_predicate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$write</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This creates the appropriate security predicate.</p>
<dl class="section return"><dt>Returns</dt><dd>a string, containing the SQL predicate </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$write</td><td>This should be true, if we need a write predicate. Default is false. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00162">162</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00099">_create_read_security_predicate()</a>, and <a class="el" href="a00149_source.html#l00130">_create_write_security_predicate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00155_source.html#l00421">CO_Main_Data_DB\_build_sql_query()</a>, <a class="el" href="a00155_source.html#l00124">CO_Main_Data_DB\_location_predicate()</a>, <a class="el" href="a00149_source.html#l00353">can_i_see_this_record()</a>, <a class="el" href="a00149_source.html#l00738">delete_record()</a>, <a class="el" href="a00149_source.html#l00322">get_access_class_by_id()</a>, <a class="el" href="a00164_source.html#l00320">CO_Security_DB\get_all_login_objects()</a>, <a class="el" href="a00164_source.html#l00365">CO_Security_DB\get_all_login_objects_with_access()</a>, <a class="el" href="a00149_source.html#l00497">get_all_readable_records()</a>, <a class="el" href="a00149_source.html#l00542">get_all_writeable_records()</a>, <a class="el" href="a00149_source.html#l00439">get_multiple_records_by_id()</a>, <a class="el" href="a00164_source.html#l00257">CO_Security_DB\get_multiple_records_by_login_id()</a>, <a class="el" href="a00149_source.html#l00386">get_single_raw_row_by_id()</a>, <a class="el" href="a00149_source.html#l00587">lock_record()</a>, and <a class="el" href="a00149_source.html#l00631">write_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                                      {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        </div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        $ret = $write ? $this-&gt;<a class="code" href="a00307.html#ad4bc3d416f085818935b32a814313202">_create_write_security_predicate</a>() : $this-&gt;<a class="code" href="a00307.html#a176b2c663fa7768e95e4fbe93281adc6">_create_read_security_predicate</a>();</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        </div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="ttc" id="a00307_html_ad4bc3d416f085818935b32a814313202"><div class="ttname"><a href="a00307.html#ad4bc3d416f085818935b32a814313202">A_CO_DB\_create_write_security_predicate</a></div><div class="ttdeci">_create_write_security_predicate()</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00130">a_co_db.class.php:130</a></div></div>
<div class="ttc" id="a00307_html_a176b2c663fa7768e95e4fbe93281adc6"><div class="ttname"><a href="a00307.html#a176b2c663fa7768e95e4fbe93281adc6">A_CO_DB\_create_read_security_predicate</a></div><div class="ttdeci">_create_read_security_predicate()</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00099">a_co_db.class.php:99</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_ad2356dbed1b38898d8c17bcd8eb405ef_cgraph.svg" width="411" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00307_ad2356dbed1b38898d8c17bcd8eb405ef_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ad4bc3d416f085818935b32a814313202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4bc3d416f085818935b32a814313202">&#9670;&nbsp;</a></span>_create_write_security_predicate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::_create_write_security_predicate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function creates an SQL predicate that limits the query to only those records to which the current logged-in user has modification rights.</p>
<dl class="section return"><dt>Returns</dt><dd>a string, containing the SQL predicate </dd></dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00130">130</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                                          {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;access_object-&gt;god_mode()) {    <span class="comment">// God can do everything...</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            $access_ids = $this-&gt;access_object-&gt;get_security_ids();</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            $ret = <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            </div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">if</span> (isset($access_ids) &amp;&amp; is_array($access_ids) &amp;&amp; count($access_ids)) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                $ret = <span class="stringliteral">&#39;((write_security_id=0) OR (write_security_id IS NULL)&#39;</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                </div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                <span class="keywordflow">foreach</span> ($access_ids as $access_id) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    $ret .= <span class="stringliteral">&#39; OR (write_security_id=&#39;</span>.intval($access_id).<span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        </div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                $ret .= <span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        </div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <span class="comment">// Only God can access God...</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="keywordflow">if</span> (($this instanceof <a class="code" href="a00327.html">CO_Security_DB</a>) &amp;&amp; !$this-&gt;access_object-&gt;god_mode()) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    $ret .= <span class="stringliteral">&#39; AND (id&lt;&gt;&#39;</span>.intval(CO_Config::god_mode_id()).<span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        </div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div><div class="ttc" id="a00327_html"><div class="ttname"><a href="a00327.html">CO_Security_DB</a></div><div class="ttdef"><b>Definition:</b> <a href="a00164_source.html#l00039">co_security_db.class.php:39</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00307_ad4bc3d416f085818935b32a814313202_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ae41efbdfe739934823b5f4c785b22611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae41efbdfe739934823b5f4c785b22611">&#9670;&nbsp;</a></span>_execute_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::_execute_query </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_parameters</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$exec_only</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This executes an SQL query, using the PDO instance. It uses PDO prepared statements to apply the query.</p>
<p>This is a "bottleneck" method. All access to the database needs to go through here.</p>
<dl class="section return"><dt>Returns</dt><dd>any response from the database. true, if it is an "execute only" query that succeeds. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_sql</td><td>This is the SQL portion of the prepared statement. </td></tr>
    <tr><td class="paramname">$in_parameters</td><td>This is an array of values to be used in the prepared statement. </td></tr>
    <tr><td class="paramname">$exec_only</td><td>If true, then this means we do not expect a response. Default is false. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00067">67</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00382_source.html#l00043">CO_Lang_Common\$pdo_error_code_failed_to_open_security_db</a>, <a class="el" href="a00397_source.html#l00036">CO_Lang\$pdo_error_desc_failed_to_open_security_db</a>, and <a class="el" href="a00397_source.html#l00035">CO_Lang\$pdo_error_name_failed_to_open_security_db</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                          {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        $ret = NULL;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        $this-&gt;error = NULL;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordflow">if</span> ($exec_only) {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                $ret = $this-&gt;_pdo_object-&gt;preparedExec($in_sql, $in_parameters);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                $ret = $this-&gt;_pdo_object-&gt;preparedQuery($in_sql, $in_parameters, <span class="keyword">false</span>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        } <span class="keywordflow">catch</span> (Exception $exception) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            $this-&gt;error = <span class="keyword">new</span> <a class="code" href="a00359.html">LGV_Error</a>(   <a class="code" href="a00347.html#acf5014a4ed49e0b20412a0ec51b585e0">CO_Lang_Common::$pdo_error_code_failed_to_open_security_db</a>,</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                            <a class="code" href="a00351.html#a0257654a8772bf00e62196ba056c4a1d">CO_Lang::$pdo_error_name_failed_to_open_security_db</a>,</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                                            <a class="code" href="a00351.html#a28da5ee3e23cf76720b022f09d4762b1">CO_Lang::$pdo_error_desc_failed_to_open_security_db</a>,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                            $exception-&gt;getFile(),</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                            $exception-&gt;getLine(),</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                            $exception-&gt;getMessage());</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            $this-&gt;_security_db_object = NULL;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        </div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div><div class="ttc" id="a00347_html_acf5014a4ed49e0b20412a0ec51b585e0"><div class="ttname"><a href="a00347.html#acf5014a4ed49e0b20412a0ec51b585e0">CO_Lang_Common\$pdo_error_code_failed_to_open_security_db</a></div><div class="ttdeci">static $pdo_error_code_failed_to_open_security_db</div><div class="ttdef"><b>Definition:</b> <a href="a00382_source.html#l00043">common.inc.php:43</a></div></div>
<div class="ttc" id="a00359_html"><div class="ttname"><a href="a00359.html">LGV_Error</a></div><div class="ttdoc">This class provides a general error report, with file, method and error information. </div><div class="ttdef"><b>Definition:</b> <a href="a00182_source.html#l00032">error.class.php:32</a></div></div>
<div class="ttc" id="a00351_html_a0257654a8772bf00e62196ba056c4a1d"><div class="ttname"><a href="a00351.html#a0257654a8772bf00e62196ba056c4a1d">CO_Lang\$pdo_error_name_failed_to_open_security_db</a></div><div class="ttdeci">static $pdo_error_name_failed_to_open_security_db</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00035">en.php:35</a></div></div>
<div class="ttc" id="a00351_html_a28da5ee3e23cf76720b022f09d4762b1"><div class="ttname"><a href="a00351.html#a28da5ee3e23cf76720b022f09d4762b1">CO_Lang\$pdo_error_desc_failed_to_open_security_db</a></div><div class="ttdeci">static $pdo_error_desc_failed_to_open_security_db</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00036">en.php:36</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00307_ae41efbdfe739934823b5f4c785b22611_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a523e2f40174a0bca0fc873d6286b3ae9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a523e2f40174a0bca0fc873d6286b3ae9">&#9670;&nbsp;</a></span>_instantiate_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::_instantiate_record </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_db_result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This creates a new record, based upon the class stored in the database.</p>
<dl class="section return"><dt>Returns</dt><dd>a new instance of a subclass of <a class="el" href="a00311.html">A_CO_DB_Table_Base</a>, loaded with its state. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_db_result</td><td>This is an associative array, with the results of the row, read from the database. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00176">176</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00382_source.html#l00049">CO_Lang_Common\$db_error_code_class_file_not_found</a>, <a class="el" href="a00382_source.html#l00050">CO_Lang_Common\$db_error_code_class_not_created</a>, <a class="el" href="a00397_source.html#l00051">CO_Lang\$db_error_desc_class_file_not_found</a>, <a class="el" href="a00397_source.html#l00053">CO_Lang\$db_error_desc_class_not_created</a>, <a class="el" href="a00397_source.html#l00050">CO_Lang\$db_error_name_class_file_not_found</a>, and <a class="el" href="a00397_source.html#l00052">CO_Lang\$db_error_name_class_not_created</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00155_source.html#l00621">CO_Main_Data_DB\generic_search()</a>, <a class="el" href="a00164_source.html#l00320">CO_Security_DB\get_all_login_objects()</a>, <a class="el" href="a00164_source.html#l00365">CO_Security_DB\get_all_login_objects_with_access()</a>, <a class="el" href="a00149_source.html#l00497">get_all_readable_records()</a>, <a class="el" href="a00149_source.html#l00542">get_all_writeable_records()</a>, <a class="el" href="a00164_source.html#l00183">CO_Security_DB\get_credentials_by_api_key()</a>, <a class="el" href="a00164_source.html#l00214">CO_Security_DB\get_initial_record_by_id()</a>, <a class="el" href="a00164_source.html#l00159">CO_Security_DB\get_initial_record_by_login_id()</a>, <a class="el" href="a00149_source.html#l00439">get_multiple_records_by_id()</a>, and <a class="el" href="a00164_source.html#l00257">CO_Security_DB\get_multiple_records_by_login_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                          {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        $ret = NULL;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        </div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        $classname = trim($in_db_result[<span class="stringliteral">&#39;access_class&#39;</span>]);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        $id = intval($in_db_result[<span class="stringliteral">&#39;id&#39;</span>]);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        </div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span> ($classname &amp;&amp; $id) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            $filename = CO_Config::db_classes_class_dir().<span class="charliteral">&#39;/&#39;</span>.strtolower($classname).<span class="stringliteral">&#39;.class.php&#39;</span>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            </div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">if</span> (!class_exists($classname)) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="keywordflow">if</span> (!file_exists($filename)) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    $filename = NULL;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    $dir_array = CO_Config::db_classes_extension_class_dir();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    </div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    <span class="keywordflow">if</span> (!is_array($dir_array)) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                        $dir_array = Array($dir_array);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                </div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    <span class="keywordflow">foreach</span> ($dir_array as $dir) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        $filename = $dir.<span class="charliteral">&#39;/&#39;</span>.strtolower($classname).<span class="stringliteral">&#39;.class.php&#39;</span>;                </div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        <span class="keywordflow">if</span> (file_exists($filename)) {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                            require_once($filename);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                            $filename = NULL;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    require_once($filename);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            </div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">if</span> (!$filename) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                $this-&gt;error = <span class="keyword">new</span> <a class="code" href="a00359.html">LGV_Error</a>(   <a class="code" href="a00347.html#a391048c719bfdf2ccc4b2fa227415df3">CO_Lang_Common::$db_error_code_class_file_not_found</a>,</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                                <a class="code" href="a00351.html#a12334e417eabb70b42f1ee35d2dea10a">CO_Lang::$db_error_name_class_file_not_found</a>,</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                                <a class="code" href="a00351.html#aacbde7da79ae97baf7732390ade89b71">CO_Lang::$db_error_desc_class_file_not_found</a>,</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                                $classname,</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                                __LINE__,</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                                __METHOD__</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                            );</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span> (class_exists($classname)) { <span class="comment">// We make sure that we send references to the same object, if we instantiate it multiple times.</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="keywordflow">if</span> (isset($this-&gt;_existing_record_objects[$id])) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    $ret = $this-&gt;_existing_record_objects[$id];</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    <span class="keywordflow">if</span> (isset($ret)) {  <span class="comment">// We make sure the object jives with what was given us from the DB.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                        <span class="comment">// This forces the collection-based classes to reload their children.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                        <span class="keywordflow">if</span> (method_exists($ret, <span class="stringliteral">&#39;reload_collection&#39;</span>)) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                            $ret-&gt;reload_collection();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                        }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                        $ret-&gt;load_from_db($in_db_result);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    $ret = <span class="keyword">new</span> $classname($this, $in_db_result);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                </div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <span class="keywordflow">if</span> (!$ret) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    $this-&gt;error = <span class="keyword">new</span> <a class="code" href="a00359.html">LGV_Error</a>(   <a class="code" href="a00347.html#a48e440bb477c590883c96ffe24ef2e28">CO_Lang_Common::$db_error_code_class_not_created</a>,</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                                    <a class="code" href="a00351.html#acb300a8454e40b6f837edbc52e95aea4">CO_Lang::$db_error_name_class_not_created</a>,</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                                    <a class="code" href="a00351.html#a606936774c3d4c0217ff6c53b7237918">CO_Lang::$db_error_desc_class_not_created</a>,</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                                                    $classname,</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                                    __LINE__,</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                                    __METHOD__</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                                );</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                </div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="comment">// Make sure we cache this for later.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                $this-&gt;_existing_record_objects[$id] = $ret;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                $this-&gt;error = <span class="keyword">new</span> <a class="code" href="a00359.html">LGV_Error</a>(   <a class="code" href="a00347.html#a48e440bb477c590883c96ffe24ef2e28">CO_Lang_Common::$db_error_code_class_not_created</a>,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                                <a class="code" href="a00351.html#acb300a8454e40b6f837edbc52e95aea4">CO_Lang::$db_error_name_class_not_created</a>,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                                                <a class="code" href="a00351.html#a606936774c3d4c0217ff6c53b7237918">CO_Lang::$db_error_desc_class_not_created</a>,</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                                $classname,</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                                __LINE__,</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                                __METHOD__</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                                            );</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        }</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        </div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div><div class="ttc" id="a00351_html_a12334e417eabb70b42f1ee35d2dea10a"><div class="ttname"><a href="a00351.html#a12334e417eabb70b42f1ee35d2dea10a">CO_Lang\$db_error_name_class_file_not_found</a></div><div class="ttdeci">static $db_error_name_class_file_not_found</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00050">en.php:50</a></div></div>
<div class="ttc" id="a00359_html"><div class="ttname"><a href="a00359.html">LGV_Error</a></div><div class="ttdoc">This class provides a general error report, with file, method and error information. </div><div class="ttdef"><b>Definition:</b> <a href="a00182_source.html#l00032">error.class.php:32</a></div></div>
<div class="ttc" id="a00351_html_acb300a8454e40b6f837edbc52e95aea4"><div class="ttname"><a href="a00351.html#acb300a8454e40b6f837edbc52e95aea4">CO_Lang\$db_error_name_class_not_created</a></div><div class="ttdeci">static $db_error_name_class_not_created</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00052">en.php:52</a></div></div>
<div class="ttc" id="a00351_html_a606936774c3d4c0217ff6c53b7237918"><div class="ttname"><a href="a00351.html#a606936774c3d4c0217ff6c53b7237918">CO_Lang\$db_error_desc_class_not_created</a></div><div class="ttdeci">static $db_error_desc_class_not_created</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00053">en.php:53</a></div></div>
<div class="ttc" id="a00347_html_a48e440bb477c590883c96ffe24ef2e28"><div class="ttname"><a href="a00347.html#a48e440bb477c590883c96ffe24ef2e28">CO_Lang_Common\$db_error_code_class_not_created</a></div><div class="ttdeci">static $db_error_code_class_not_created</div><div class="ttdef"><b>Definition:</b> <a href="a00382_source.html#l00050">common.inc.php:50</a></div></div>
<div class="ttc" id="a00351_html_aacbde7da79ae97baf7732390ade89b71"><div class="ttname"><a href="a00351.html#aacbde7da79ae97baf7732390ade89b71">CO_Lang\$db_error_desc_class_file_not_found</a></div><div class="ttdeci">static $db_error_desc_class_file_not_found</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00051">en.php:51</a></div></div>
<div class="ttc" id="a00347_html_a391048c719bfdf2ccc4b2fa227415df3"><div class="ttname"><a href="a00347.html#a391048c719bfdf2ccc4b2fa227415df3">CO_Lang_Common\$db_error_code_class_file_not_found</a></div><div class="ttdeci">static $db_error_code_class_file_not_found</div><div class="ttdef"><b>Definition:</b> <a href="a00382_source.html#l00049">common.inc.php:49</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00307_a523e2f40174a0bca0fc873d6286b3ae9_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="af6baed01812f38acbc19df4b00f443b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6baed01812f38acbc19df4b00f443b2">&#9670;&nbsp;</a></span>can_i_see_this_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::can_i_see_this_record </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This returns true, if the current user at least has read access to the record whose ID is provided..</p>
<p>This is "security safe," so that means that if the user does not have rights to the row, or the row does not exist, they will get false.</p>
<dl class="section return"><dt>Returns</dt><dd>a boolean, true, if the user has read access to an existing record in this database. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_id</td><td>This is the ID of the record to check. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00353">353</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>, and <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                                              {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        $ret = <span class="keyword">false</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        </div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">if</span> (intval($in_id)) {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            $predicate = $this-&gt;<a class="code" href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">_create_security_predicate</a>();</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        </div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">if</span> ($predicate) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                $predicate .= <span class="stringliteral">&#39; AND &#39;</span>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                $predicate = <span class="stringliteral">&#39;true AND &#39;</span>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        </div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            $sql = <span class="stringliteral">&#39;SELECT id FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE &#39;</span>.$predicate.<span class="stringliteral">&#39;id=&#39;</span>.intval($in_id);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            $ret = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        </div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keywordflow">if</span> (isset($ret) &amp;&amp; is_array($ret) &amp;&amp; count($ret)) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                $ret = intval($ret[0][<span class="stringliteral">&#39;id&#39;</span>]) == intval($in_id);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        </div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div><div class="ttc" id="a00307_html_a2396849660aa4ff018ab7509a4badeb5"><div class="ttname"><a href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">A_CO_DB\execute_query</a></div><div class="ttdeci">execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00287">a_co_db.class.php:287</a></div></div>
<div class="ttc" id="a00307_html_ad2356dbed1b38898d8c17bcd8eb405ef"><div class="ttname"><a href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">A_CO_DB\_create_security_predicate</a></div><div class="ttdeci">_create_security_predicate( $write=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00162">a_co_db.class.php:162</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_af6baed01812f38acbc19df4b00f443b2_cgraph.svg" width="651" height="162"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9794f1140b379f8d09c4265a089fcea0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9794f1140b379f8d09c4265a089fcea0">&#9670;&nbsp;</a></span>delete_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::delete_record </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This deletes a record, based on its unique ID in the table. The logged-in user must have write permission for the record.</p>
<p>This double-checks after the delete, just to make sure the record was, indeed, deleted.</p>
<p>This is properly "screened" for security.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the deletion was successful. </dd></dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00738">738</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00382_source.html#l00047">CO_Lang_Common\$pdo_error_code_failed_delete_attempt</a>, <a class="el" href="a00382_source.html#l00046">CO_Lang_Common\$pdo_error_code_illegal_delete_attempt</a>, <a class="el" href="a00397_source.html#l00048">CO_Lang\$pdo_error_desc_failed_delete_attempt</a>, <a class="el" href="a00397_source.html#l00045">CO_Lang\$pdo_error_desc_illegal_delete_attempt</a>, <a class="el" href="a00397_source.html#l00047">CO_Lang\$pdo_error_name_failed_delete_attempt</a>, <a class="el" href="a00397_source.html#l00044">CO_Lang\$pdo_error_name_illegal_delete_attempt</a>, <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>, and <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                                  {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        $ret = <span class="keyword">false</span>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        </div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        $id = intval($id);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        $predicate = $this-&gt;<a class="code" href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">_create_security_predicate</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        </div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="keywordflow">if</span> ($predicate) {</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            $predicate .= <span class="stringliteral">&#39; AND &#39;</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="comment">// First, make sure we have write permission for this record, and that the record exists.</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        $sql = <span class="stringliteral">&#39;SELECT id FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE (&#39;</span>.$predicate.<span class="stringliteral">&#39;id=&#39;</span>.$id.<span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        </div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="keywordflow">if</span> (!$this-&gt;error &amp;&amp; isset($temp) &amp;&amp; $temp &amp;&amp; is_array($temp) &amp;&amp; (1 == count($temp))) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            $sql = <span class="stringliteral">&#39;DELETE FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE (&#39;</span>.$predicate.<span class="stringliteral">&#39;id=&#39;</span>.$id.<span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array(), <span class="keyword">true</span>);  <span class="comment">// We call this as an &quot;execute-only&quot; query.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="keywordflow">if</span> (!$temp || $this-&gt;error) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                $this-&gt;error = <span class="keyword">new</span> <a class="code" href="a00359.html">LGV_Error</a>(   <a class="code" href="a00347.html#a4a1d40325846254a41c2c2573675a66b">CO_Lang_Common::$pdo_error_code_failed_delete_attempt</a>,</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                                                <a class="code" href="a00351.html#acfd50d40808b680afd47b8181b921a4b">CO_Lang::$pdo_error_name_failed_delete_attempt</a>,</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                                                <a class="code" href="a00351.html#ac7f1d6e2800e1d078310b15b5133016f">CO_Lang::$pdo_error_desc_failed_delete_attempt</a>);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                <span class="comment">// Make sure she&#39;s dead, Jim. We do an open-ended check.</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                $sql = <span class="stringliteral">&#39;SELECT id FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE id=&#39;</span>.$id;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                <span class="keywordflow">if</span> (!$this-&gt;error &amp;&amp; isset($temp) &amp;&amp; is_array($temp) &amp;&amp; (0 == count($temp))) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                    <span class="comment">// Make sure that we also remove it from our cache.</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                    <span class="keywordflow">if</span> (isset($this-&gt;_existing_record_objects[$id])) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                        $this-&gt;_existing_record_objects[$id]-&gt;danger_will_robinson_danger_clear_id();</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                        unset($this-&gt;_existing_record_objects[$id]);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                    }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                        </div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                    $ret = <span class="keyword">true</span>;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                    $this-&gt;error = <span class="keyword">new</span> <a class="code" href="a00359.html">LGV_Error</a>(   <a class="code" href="a00347.html#a4a1d40325846254a41c2c2573675a66b">CO_Lang_Common::$pdo_error_code_failed_delete_attempt</a>,</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                                                    <a class="code" href="a00351.html#acfd50d40808b680afd47b8181b921a4b">CO_Lang::$pdo_error_name_failed_delete_attempt</a>,</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                                                    <a class="code" href="a00351.html#ac7f1d6e2800e1d078310b15b5133016f">CO_Lang::$pdo_error_desc_failed_delete_attempt</a>);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            }</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            $this-&gt;error = <span class="keyword">new</span> <a class="code" href="a00359.html">LGV_Error</a>(   <a class="code" href="a00347.html#aa9c7e29a1ffa3de9010b4199a1c84ab9">CO_Lang_Common::$pdo_error_code_illegal_delete_attempt</a>,</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                            <a class="code" href="a00351.html#a833b28623daa98b519369d112747ddf1">CO_Lang::$pdo_error_name_illegal_delete_attempt</a>,</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                                            <a class="code" href="a00351.html#a5289f3dfe6679cd470d2c5ae7ec35fae">CO_Lang::$pdo_error_desc_illegal_delete_attempt</a>);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        </div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    }</div><div class="ttc" id="a00307_html_a2396849660aa4ff018ab7509a4badeb5"><div class="ttname"><a href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">A_CO_DB\execute_query</a></div><div class="ttdeci">execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00287">a_co_db.class.php:287</a></div></div>
<div class="ttc" id="a00347_html_aa9c7e29a1ffa3de9010b4199a1c84ab9"><div class="ttname"><a href="a00347.html#aa9c7e29a1ffa3de9010b4199a1c84ab9">CO_Lang_Common\$pdo_error_code_illegal_delete_attempt</a></div><div class="ttdeci">static $pdo_error_code_illegal_delete_attempt</div><div class="ttdef"><b>Definition:</b> <a href="a00382_source.html#l00046">common.inc.php:46</a></div></div>
<div class="ttc" id="a00351_html_acfd50d40808b680afd47b8181b921a4b"><div class="ttname"><a href="a00351.html#acfd50d40808b680afd47b8181b921a4b">CO_Lang\$pdo_error_name_failed_delete_attempt</a></div><div class="ttdeci">static $pdo_error_name_failed_delete_attempt</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00047">en.php:47</a></div></div>
<div class="ttc" id="a00359_html"><div class="ttname"><a href="a00359.html">LGV_Error</a></div><div class="ttdoc">This class provides a general error report, with file, method and error information. </div><div class="ttdef"><b>Definition:</b> <a href="a00182_source.html#l00032">error.class.php:32</a></div></div>
<div class="ttc" id="a00351_html_a5289f3dfe6679cd470d2c5ae7ec35fae"><div class="ttname"><a href="a00351.html#a5289f3dfe6679cd470d2c5ae7ec35fae">CO_Lang\$pdo_error_desc_illegal_delete_attempt</a></div><div class="ttdeci">static $pdo_error_desc_illegal_delete_attempt</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00045">en.php:45</a></div></div>
<div class="ttc" id="a00347_html_a4a1d40325846254a41c2c2573675a66b"><div class="ttname"><a href="a00347.html#a4a1d40325846254a41c2c2573675a66b">CO_Lang_Common\$pdo_error_code_failed_delete_attempt</a></div><div class="ttdeci">static $pdo_error_code_failed_delete_attempt</div><div class="ttdef"><b>Definition:</b> <a href="a00382_source.html#l00047">common.inc.php:47</a></div></div>
<div class="ttc" id="a00351_html_a833b28623daa98b519369d112747ddf1"><div class="ttname"><a href="a00351.html#a833b28623daa98b519369d112747ddf1">CO_Lang\$pdo_error_name_illegal_delete_attempt</a></div><div class="ttdeci">static $pdo_error_name_illegal_delete_attempt</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00044">en.php:44</a></div></div>
<div class="ttc" id="a00307_html_ad2356dbed1b38898d8c17bcd8eb405ef"><div class="ttname"><a href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">A_CO_DB\_create_security_predicate</a></div><div class="ttdeci">_create_security_predicate( $write=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00162">a_co_db.class.php:162</a></div></div>
<div class="ttc" id="a00351_html_ac7f1d6e2800e1d078310b15b5133016f"><div class="ttname"><a href="a00351.html#ac7f1d6e2800e1d078310b15b5133016f">CO_Lang\$pdo_error_desc_failed_delete_attempt</a></div><div class="ttdeci">static $pdo_error_desc_failed_delete_attempt</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00048">en.php:48</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_a9794f1140b379f8d09c4265a089fcea0_cgraph.svg" width="643" height="162"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2396849660aa4ff018ab7509a4badeb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2396849660aa4ff018ab7509a4badeb5">&#9670;&nbsp;</a></span>execute_query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::execute_query </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_parameters</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$exec_only</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is an accessor for the query execution method.</p>
<dl class="section return"><dt>Returns</dt><dd>any response from the database. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_sql</td><td>This is the SQL portion of the prepared statement. </td></tr>
    <tr><td class="paramname">$in_parameters</td><td>This is an array of values to be used in the prepared statement. </td></tr>
    <tr><td class="paramname">$exec_only</td><td>If true, then this means we do not expect a response. Default is false. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00287">287</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00067">_execute_query()</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00149_source.html#l00353">can_i_see_this_record()</a>, <a class="el" href="a00149_source.html#l00738">delete_record()</a>, <a class="el" href="a00155_source.html#l00621">CO_Main_Data_DB\generic_search()</a>, <a class="el" href="a00149_source.html#l00322">get_access_class_by_id()</a>, <a class="el" href="a00164_source.html#l00320">CO_Security_DB\get_all_login_objects()</a>, <a class="el" href="a00164_source.html#l00365">CO_Security_DB\get_all_login_objects_with_access()</a>, <a class="el" href="a00149_source.html#l00497">get_all_readable_records()</a>, <a class="el" href="a00164_source.html#l00133">CO_Security_DB\get_all_tokens()</a>, <a class="el" href="a00149_source.html#l00542">get_all_writeable_records()</a>, <a class="el" href="a00164_source.html#l00183">CO_Security_DB\get_credentials_by_api_key()</a>, <a class="el" href="a00149_source.html#l00302">get_db_backup()</a>, <a class="el" href="a00164_source.html#l00214">CO_Security_DB\get_initial_record_by_id()</a>, <a class="el" href="a00164_source.html#l00159">CO_Security_DB\get_initial_record_by_login_id()</a>, <a class="el" href="a00149_source.html#l00439">get_multiple_records_by_id()</a>, <a class="el" href="a00164_source.html#l00257">CO_Security_DB\get_multiple_records_by_login_id()</a>, <a class="el" href="a00164_source.html#l00063">CO_Security_DB\get_security_ids_for_id()</a>, <a class="el" href="a00149_source.html#l00386">get_single_raw_row_by_id()</a>, <a class="el" href="a00164_source.html#l00099">CO_Security_DB\i_have_all_ids()</a>, <a class="el" href="a00155_source.html#l00542">CO_Main_Data_DB\item_exists()</a>, <a class="el" href="a00149_source.html#l00587">lock_record()</a>, and <a class="el" href="a00149_source.html#l00631">write_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                      {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="a00307.html#ae41efbdfe739934823b5f4c785b22611">_execute_query</a>($in_sql, $in_parameters, $exec_only);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div><div class="ttc" id="a00307_html_ae41efbdfe739934823b5f4c785b22611"><div class="ttname"><a href="a00307.html#ae41efbdfe739934823b5f4c785b22611">A_CO_DB\_execute_query</a></div><div class="ttdeci">_execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00067">a_co_db.class.php:67</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_a2396849660aa4ff018ab7509a4badeb5_cgraph.svg" width="416" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00307_a2396849660aa4ff018ab7509a4badeb5_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a707e7cfdbea32a3713320dbca46dac64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a707e7cfdbea32a3713320dbca46dac64">&#9670;&nbsp;</a></span>get_access_class_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::get_access_class_by_id </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This returns the access class for the given ID.</p>
<p>This is "security safe," so that means that if the user does not have rights to the row, they will get NULL.</p>
<dl class="section return"><dt>Returns</dt><dd>a string, containing the access_class data column. NULL, if no response (like the ID does not exist, or the user does not have read rights to it). </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_id</td><td>This is the ID of the record to fetch. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00322">322</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>, and <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                              {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        $ret = NULL;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        </div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        $predicate = $this-&gt;<a class="code" href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">_create_security_predicate</a>();</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        </div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">if</span> ($predicate) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            $predicate .= <span class="stringliteral">&#39; AND &#39;</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            $predicate = <span class="stringliteral">&#39;true AND &#39;</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        </div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        $sql = <span class="stringliteral">&#39;SELECT access_class FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE &#39;</span>.$predicate.<span class="stringliteral">&#39;id=&#39;</span>.intval($in_id);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        $ret = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        </div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">if</span> (isset($ret) &amp;&amp; is_array($ret) &amp;&amp; count($ret)) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            $ret = strval($ret[0][<span class="stringliteral">&#39;access_class&#39;</span>]);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        </div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div><div class="ttc" id="a00307_html_a2396849660aa4ff018ab7509a4badeb5"><div class="ttname"><a href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">A_CO_DB\execute_query</a></div><div class="ttdeci">execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00287">a_co_db.class.php:287</a></div></div>
<div class="ttc" id="a00307_html_ad2356dbed1b38898d8c17bcd8eb405ef"><div class="ttname"><a href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">A_CO_DB\_create_security_predicate</a></div><div class="ttdeci">_create_security_predicate( $write=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00162">a_co_db.class.php:162</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_a707e7cfdbea32a3713320dbca46dac64_cgraph.svg" width="630" height="162"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6ccca3e1b18f58a3d4a4ad6018f067b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ccca3e1b18f58a3d4a4ad6018f067b1">&#9670;&nbsp;</a></span>get_all_readable_records()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::get_all_readable_records </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$open_only</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_this_id</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This returns instances of every readable record in the database readable by the logged-in user (or only "open" records, if no login).</p>
<p>This is properly "screened" for security.</p>
<dl class="section return"><dt>Returns</dt><dd>an array, containing one or more instances of a subclass of <a class="el" href="a00311.html">A_CO_DB_Table_Base</a> (Each instance may be a different class) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$open_only</td><td>If true, then we will look for ONLY records with a NULL or 0 read_security_id, even if we are logged in. </td></tr>
    <tr><td class="paramname">$in_this_id</td><td>If we are in "god mode," we can look for particular IDs. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00497">497</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>, <a class="el" href="a00149_source.html#l00176">_instantiate_record()</a>, and <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                              {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        $ret = NULL;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        </div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        $predicate = $open_only ? <span class="stringliteral">&#39;((read_security_id=0) OR (read_security_id IS NULL))&#39;</span> : $this-&gt;<a class="code" href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">_create_security_predicate</a>();</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        </div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="comment">// No need for an AND, as the predicate is the only qualifier.</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span> (!$predicate) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            $in_this_id = intval($in_this_id);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">if</span> ($in_this_id) {  <span class="comment">// We can look for certain IDs in God Mode.</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                $predicate = <span class="stringliteral">&quot;(read_security_id=$in_this_id)&quot;</span>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                </div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                $predicate = <span class="stringliteral">&#39;true&#39;</span>; <span class="comment">// If we are in &quot;God Mode,&quot; we could get no predicate, so we just go with &quot;1&quot;.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        </div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        $sql = <span class="stringliteral">&#39;SELECT * FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE &#39;</span>.$predicate;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span> (isset($temp) &amp;&amp; $temp &amp;&amp; is_array($temp) &amp;&amp; count($temp) ) {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            $ret = Array();</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="keywordflow">foreach</span> ($temp as $result) {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <span class="keywordflow">if</span> (isset($result) &amp;&amp; is_array($result) &amp;&amp; count($result)) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    $result = $this-&gt;<a class="code" href="a00307.html#a523e2f40174a0bca0fc873d6286b3ae9">_instantiate_record</a>($result);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                    <span class="comment">// Belt and suspenders. Make sure nothing leaks through.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                    <span class="keywordflow">if</span> ($result &amp;&amp; $result-&gt;user_can_read()) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                        array_push($ret, $result);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                    }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                }</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            usort($ret, <span class="keyword">function</span>($a, $b){<span class="keywordflow">return</span> ($a-&gt;id() &gt; $b-&gt;id());});</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        </div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    }</div><div class="ttc" id="a00307_html_a2396849660aa4ff018ab7509a4badeb5"><div class="ttname"><a href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">A_CO_DB\execute_query</a></div><div class="ttdeci">execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00287">a_co_db.class.php:287</a></div></div>
<div class="ttc" id="a00307_html_a523e2f40174a0bca0fc873d6286b3ae9"><div class="ttname"><a href="a00307.html#a523e2f40174a0bca0fc873d6286b3ae9">A_CO_DB\_instantiate_record</a></div><div class="ttdeci">_instantiate_record( $in_db_result)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00176">a_co_db.class.php:176</a></div></div>
<div class="ttc" id="a00307_html_ad2356dbed1b38898d8c17bcd8eb405ef"><div class="ttname"><a href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">A_CO_DB\_create_security_predicate</a></div><div class="ttdeci">_create_security_predicate( $write=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00162">a_co_db.class.php:162</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_a6ccca3e1b18f58a3d4a4ad6018f067b1_cgraph.svg" width="660" height="192"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2b39eabcd72a9d79267e51a5f2b16648"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b39eabcd72a9d79267e51a5f2b16648">&#9670;&nbsp;</a></span>get_all_writeable_records()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::get_all_writeable_records </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_this_id</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This returns instances of every writeable record in the database readable by the logged-in user (cannot be used by non-logged-in-users).</p>
<p>This is properly "screened" for security.</p>
<dl class="section return"><dt>Returns</dt><dd>an array, containing one or more instances of a subclass of <a class="el" href="a00311.html">A_CO_DB_Table_Base</a> (Each instance may be a different class) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_this_id</td><td>If we are in "god mode," we can look for particular IDs. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00542">542</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>, <a class="el" href="a00149_source.html#l00176">_instantiate_record()</a>, and <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                                              {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        $ret = NULL;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        </div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        $access_ids = $this-&gt;access_object-&gt;get_security_ids();</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="comment">// Only logged-in users can write.</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">if</span> (isset($access_ids) &amp;&amp; is_array($access_ids) &amp;&amp; count($access_ids)) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            $predicate = $this-&gt;<a class="code" href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">_create_security_predicate</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        </div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="comment">// No need for an AND, as the predicate is the only qualifier.</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">if</span> (!$predicate) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                $in_this_id = intval($in_this_id);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                <span class="keywordflow">if</span> ($in_this_id) {  <span class="comment">// We can look for certain IDs in God Mode.</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                    $predicate = <span class="stringliteral">&quot;(write_security_id=$in_this_id)&quot;</span>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                </div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                    $predicate = <span class="stringliteral">&#39;true&#39;</span>; <span class="comment">// If we are in &quot;God Mode,&quot; we could get no predicate, so we just go with &quot;1&quot;.</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        </div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            $sql = <span class="stringliteral">&#39;SELECT * FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE &#39;</span>.$predicate;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="keywordflow">if</span> (isset($temp) &amp;&amp; $temp &amp;&amp; is_array($temp) &amp;&amp; count($temp) ) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                $ret = Array();</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <span class="keywordflow">foreach</span> ($temp as $result) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                    $result = $this-&gt;<a class="code" href="a00307.html#a523e2f40174a0bca0fc873d6286b3ae9">_instantiate_record</a>($result);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                    <span class="comment">// Belt and suspenders. Make sure nothing leaks through.</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                    <span class="keywordflow">if</span> ($result &amp;&amp; $result-&gt;user_can_write()) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                        array_push($ret, $result);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                    }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                usort($ret, <span class="keyword">function</span>($a, $b){<span class="keywordflow">return</span> ($a-&gt;id() &gt; $b-&gt;id());});</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        </div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div><div class="ttc" id="a00307_html_a2396849660aa4ff018ab7509a4badeb5"><div class="ttname"><a href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">A_CO_DB\execute_query</a></div><div class="ttdeci">execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00287">a_co_db.class.php:287</a></div></div>
<div class="ttc" id="a00307_html_a523e2f40174a0bca0fc873d6286b3ae9"><div class="ttname"><a href="a00307.html#a523e2f40174a0bca0fc873d6286b3ae9">A_CO_DB\_instantiate_record</a></div><div class="ttdeci">_instantiate_record( $in_db_result)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00176">a_co_db.class.php:176</a></div></div>
<div class="ttc" id="a00307_html_ad2356dbed1b38898d8c17bcd8eb405ef"><div class="ttname"><a href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">A_CO_DB\_create_security_predicate</a></div><div class="ttdeci">_create_security_predicate( $write=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00162">a_co_db.class.php:162</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_a2b39eabcd72a9d79267e51a5f2b16648_cgraph.svg" width="662" height="192"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4b86c0613b521ffdbbd62f8928ad07f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b86c0613b521ffdbbd62f8928ad07f8">&#9670;&nbsp;</a></span>get_db_backup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::get_db_backup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a special "God Mode-Only" method that dumps the entire table. It is used to generate a CSV backup file.</p>
<p>The user must be logged in as "God."</p>
<dl class="section return"><dt>Returns</dt><dd>an array of associative arrays, with the dump. NULL if the user is not authorized. </dd></dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00302">302</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                    {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        $ret = NULL;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        </div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;access_object-&gt;god_mode()) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            $sql = <span class="stringliteral">&#39;SELECT * FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE id&gt;1 ORDER BY id&#39;</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            $ret = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        </div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div><div class="ttc" id="a00307_html_a2396849660aa4ff018ab7509a4badeb5"><div class="ttname"><a href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">A_CO_DB\execute_query</a></div><div class="ttdeci">execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00287">a_co_db.class.php:287</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_a4b86c0613b521ffdbbd62f8928ad07f8_cgraph.svg" width="643" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aaca8bf49257aa5ade3c354ef76119fa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaca8bf49257aa5ade3c354ef76119fa4">&#9670;&nbsp;</a></span>get_multiple_records_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::get_multiple_records_by_id </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_id_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$and_write</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function returns one or more record instances, by their unique IDs in the table.</p>
<p>This is properly "screened" for security.</p>
<dl class="section return"><dt>Returns</dt><dd>an array, containing one or more instances of a subclass of <a class="el" href="a00311.html">A_CO_DB_Table_Base</a> (Each instance may be a different class) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_id_array</td><td>This is an array of integers, each of which is the ID of a record to fetch. </td></tr>
    <tr><td class="paramname">$and_write</td><td>If this is true, then we need modify permission for the record. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00439">439</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>, <a class="el" href="a00149_source.html#l00176">_instantiate_record()</a>, and <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00149_source.html#l00417">get_single_record_by_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                                  {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        $ret = NULL;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        </div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        $predicate = $this-&gt;<a class="code" href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">_create_security_predicate</a>($and_write);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        </div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">if</span> ($predicate) {   <span class="comment">// If we got a predicate, then we AND it with the rest of the statement.</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            $predicate .= <span class="stringliteral">&#39; AND &#39;</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        </div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        $sql = <span class="stringliteral">&#39;SELECT * FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE &#39;</span>.$predicate.<span class="charliteral">&#39;(&#39;</span>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        $params = Array();</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// Clean the array to make sure they are all integers.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        $id_array = array_map(<span class="stringliteral">&#39;intval&#39;</span>, $in_id_array);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">foreach</span> ($id_array as $id) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">if</span> (0 &lt; $id) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="keywordflow">if</span> (0 &lt; count($params)) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                    $sql .= <span class="stringliteral">&#39; OR &#39;</span>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                $sql.= <span class="stringliteral">&#39;(id=?)&#39;</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                array_push($params, $id);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        </div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        $sql  .= <span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, $params);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">// // Commented out, but useful for debug.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">// echo(&#39;SQL:&lt;pre&gt;&#39;.htmlspecialchars(print_r($sql, true)).&#39;&lt;/pre&gt;&#39;);</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">// echo(&#39;PARAMS:&lt;pre&gt;&#39;.htmlspecialchars(print_r($params, true)).&#39;&lt;/pre&gt;&#39;);</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">// echo(&#39;RESPONSE:&lt;pre&gt;&#39;.htmlspecialchars(print_r($temp, true)).&#39;&lt;/pre&gt;&#39;);</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span> (isset($temp) &amp;&amp; $temp &amp;&amp; is_array($temp) &amp;&amp; count($temp) ) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            $ret = Array();</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="keywordflow">foreach</span> ($temp as $result) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                $result = $this-&gt;<a class="code" href="a00307.html#a523e2f40174a0bca0fc873d6286b3ae9">_instantiate_record</a>($result);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                <span class="keywordflow">if</span> (isset($result) &amp;&amp; ($result instanceof <a class="code" href="a00311.html">A_CO_DB_Table_Base</a>)) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                    $weregood = $and_write ? $result-&gt;user_can_write() : $result-&gt;user_can_read();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                    <span class="comment">// Belt and suspenders. Make sure nothing leaks through.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                    <span class="keywordflow">if</span> ($weregood) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                        $ret[] = $result;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                    }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            usort($ret, <span class="keyword">function</span>($a, $b){<span class="keywordflow">return</span> ($a-&gt;id() &gt; $b-&gt;id());});</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        </div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div><div class="ttc" id="a00307_html_a2396849660aa4ff018ab7509a4badeb5"><div class="ttname"><a href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">A_CO_DB\execute_query</a></div><div class="ttdeci">execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00287">a_co_db.class.php:287</a></div></div>
<div class="ttc" id="a00307_html_a523e2f40174a0bca0fc873d6286b3ae9"><div class="ttname"><a href="a00307.html#a523e2f40174a0bca0fc873d6286b3ae9">A_CO_DB\_instantiate_record</a></div><div class="ttdeci">_instantiate_record( $in_db_result)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00176">a_co_db.class.php:176</a></div></div>
<div class="ttc" id="a00311_html"><div class="ttname"><a href="a00311.html">A_CO_DB_Table_Base</a></div><div class="ttdef"><b>Definition:</b> <a href="a00152_source.html#l00043">a_co_db_table_base.class.php:43</a></div></div>
<div class="ttc" id="a00307_html_ad2356dbed1b38898d8c17bcd8eb405ef"><div class="ttname"><a href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">A_CO_DB\_create_security_predicate</a></div><div class="ttdeci">_create_security_predicate( $write=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00162">a_co_db.class.php:162</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_aaca8bf49257aa5ade3c354ef76119fa4_cgraph.svg" width="634" height="192"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_aaca8bf49257aa5ade3c354ef76119fa4_icgraph.svg" width="366" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af62a0d273b69bdf1f5012f88e619cec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af62a0d273b69bdf1f5012f88e619cec7">&#9670;&nbsp;</a></span>get_single_raw_row_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::get_single_raw_row_by_id </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$and_write</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a special method that does not apply a security predicate. It is used to force-reload record instances.</p>
<p>This should ONLY be called from the database reloader functions.</p>
<dl class="section return"><dt>Returns</dt><dd>an associative array, containing the "raw" database record response. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_id</td><td>This is the ID of the record to fetch. </td></tr>
    <tr><td class="paramname">$and_write</td><td>If this is true, then we need modify permission for the record. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00386">386</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>, and <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                              {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        $ret = NULL;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        </div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        $predicate = $this-&gt;<a class="code" href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">_create_security_predicate</a>($and_write);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        </div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">if</span> ($predicate) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            $predicate .= <span class="stringliteral">&#39; AND &#39;</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            $predicate = <span class="stringliteral">&#39;true AND &#39;</span>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        </div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        $sql = <span class="stringliteral">&#39;SELECT * FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE &#39;</span>.$predicate.<span class="stringliteral">&#39;id=&#39;</span>.intval($in_id);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        $ret = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        </div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">if</span> (isset($ret) &amp;&amp; is_array($ret) &amp;&amp; count($ret)) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            $ret = $ret[0];</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div><div class="ttc" id="a00307_html_a2396849660aa4ff018ab7509a4badeb5"><div class="ttname"><a href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">A_CO_DB\execute_query</a></div><div class="ttdeci">execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00287">a_co_db.class.php:287</a></div></div>
<div class="ttc" id="a00307_html_ad2356dbed1b38898d8c17bcd8eb405ef"><div class="ttname"><a href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">A_CO_DB\_create_security_predicate</a></div><div class="ttdeci">_create_security_predicate( $write=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00162">a_co_db.class.php:162</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_af62a0d273b69bdf1f5012f88e619cec7_cgraph.svg" width="623" height="162"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a631d8d027d72c940a7cec689cbb4e568"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a631d8d027d72c940a7cec689cbb4e568">&#9670;&nbsp;</a></span>get_single_record_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::get_single_record_by_id </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$and_write</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function returns a single record instance, by its unique ID in the table.</p>
<p>This is properly "screened" for security.</p>
<dl class="section return"><dt>Returns</dt><dd>a single instance of a subclass of <a class="el" href="a00311.html">A_CO_DB_Table_Base</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_id</td><td>This is the ID of the record to fetch. </td></tr>
    <tr><td class="paramname">$and_write</td><td>If this is true, then we need modify permission for the record. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00417">417</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00439">get_multiple_records_by_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                                              {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        $ret = NULL;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        </div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        $temp = $this-&gt;<a class="code" href="a00307.html#aaca8bf49257aa5ade3c354ef76119fa4">get_multiple_records_by_id</a>(Array($in_id), $and_write);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        </div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">if</span> (isset($temp) &amp;&amp; $temp &amp;&amp; is_array($temp) &amp;&amp; count($temp) ) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            $ret = $temp[0];</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        </div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div><div class="ttc" id="a00307_html_aaca8bf49257aa5ade3c354ef76119fa4"><div class="ttname"><a href="a00307.html#aaca8bf49257aa5ade3c354ef76119fa4">A_CO_DB\get_multiple_records_by_id</a></div><div class="ttdeci">get_multiple_records_by_id( $in_id_array, $and_write=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00439">a_co_db.class.php:439</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00307_a631d8d027d72c940a7cec689cbb4e568_cgraph.svg" width="100%" height="444"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="afacdcd578ddc750ca33d2418b54ab6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afacdcd578ddc750ca33d2418b54ab6b9">&#9670;&nbsp;</a></span>lock_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::lock_record </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_record_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This "locks" a given record by setting its read_security_id to -2.</p>
<dl class="section return"><dt>Returns</dt><dd>an integer; the previous contents of the read_security_id column. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$in_record_id</td><td>This is the unique ID of the record to be "locked." </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00587">587</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>, and <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                                  {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        $ret = 0;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        </div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        $predicate = $this-&gt;<a class="code" href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">_create_security_predicate</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keywordflow">if</span> ($predicate) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            $predicate .= <span class="stringliteral">&#39; AND &#39;</span>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        </div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        $in_record_id = intval($in_record_id);  <span class="comment">// Make sure we are an integer.</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        </div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">if</span> (0 &lt; $in_record_id) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            <span class="comment">// First, we look for a record with our ID, and for which we have write permission, and we get the original Read ID.</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            $sql = <span class="stringliteral">&#39;SELECT read_security_id FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE &#39;</span>.$predicate.<span class="stringliteral">&#39;id=&#39;</span>.$in_record_id;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            </div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <span class="keywordflow">if</span> (isset($temp) &amp;&amp; $temp &amp;&amp; is_array($temp) &amp;&amp; (1 == count($temp)) ) { <span class="comment">// If we  got a record, then we&#39;ll be updating it.</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                $ret = intval($temp[0]);    <span class="comment">// Get the original value.</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                </div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                $sql = <span class="stringliteral">&#39;UPDATE &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; SET read_security_id=-2 WHERE id=&#39;</span>.$in_record_id;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        </div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                </div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                <span class="keywordflow">if</span> ($this-&gt;error) { <span class="comment">// If we had an error, we return squat.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                    $ret = 0;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                }</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        </div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div><div class="ttc" id="a00307_html_a2396849660aa4ff018ab7509a4badeb5"><div class="ttname"><a href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">A_CO_DB\execute_query</a></div><div class="ttdeci">execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00287">a_co_db.class.php:287</a></div></div>
<div class="ttc" id="a00307_html_ad2356dbed1b38898d8c17bcd8eb405ef"><div class="ttname"><a href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">A_CO_DB\_create_security_predicate</a></div><div class="ttdeci">_create_security_predicate( $write=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00162">a_co_db.class.php:162</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_afacdcd578ddc750ca33d2418b54ab6b9_cgraph.svg" width="631" height="162"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="acac7eadbd231d714f3eed150eec35838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acac7eadbd231d714f3eed150eec35838">&#9670;&nbsp;</a></span>write_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::write_record </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params_associative_array</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This updates or creates a database record (row), based on an associative array of parameters passed in.</p>
<p>If the 'id' column is 0 or NULL, then this will be a new record.</p>
<p>This is properly "screened" for security.</p>
<dl class="section return"><dt>Returns</dt><dd>true (Successful update), or the integer ID of a new record. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$params_associative_array</td><td>This is an associative array of parameters, where the key is the database column name. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00631">631</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

<p class="reference">References <a class="el" href="a00382_source.html#l00045">CO_Lang_Common\$pdo_error_code_illegal_write_attempt</a>, <a class="el" href="a00397_source.html#l00042">CO_Lang\$pdo_error_desc_illegal_write_attempt</a>, <a class="el" href="a00397_source.html#l00041">CO_Lang\$pdo_error_name_illegal_write_attempt</a>, <a class="el" href="a00149_source.html#l00162">_create_security_predicate()</a>, and <a class="el" href="a00149_source.html#l00287">execute_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                  {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        $ret = <span class="keyword">false</span>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">if</span> (isset($params_associative_array) &amp;&amp; is_array($params_associative_array) &amp;&amp; count($params_associative_array)) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            $access_ids = $this-&gt;access_object-&gt;get_security_ids();</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            $params_associative_array[<span class="stringliteral">&#39;last_access&#39;</span>] = date(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="keywordflow">if</span> (isset($access_ids) &amp;&amp; is_array($access_ids) &amp;&amp; count($access_ids)) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                $predicate = $this-&gt;<a class="code" href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">_create_security_predicate</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        </div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                <span class="keywordflow">if</span> ($predicate) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                    $predicate .= <span class="stringliteral">&#39; AND &#39;</span>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            </div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                $id = isset($params_associative_array[<span class="stringliteral">&#39;id&#39;</span>]) ? intval($params_associative_array[<span class="stringliteral">&#39;id&#39;</span>]) : 0;  <span class="comment">// We extract  the ID from the fields, or assume a new record.</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                </div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <span class="keywordflow">if</span> (0 &lt; $id) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    <span class="comment">// First, we look for a record with our ID, and for which we have write permission.</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                    $sql = <span class="stringliteral">&#39;SELECT * FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE &#39;</span>.$predicate.<span class="stringliteral">&#39;id=&#39;</span>.$id;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                    $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                </div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                    <span class="keywordflow">if</span> (isset($temp) &amp;&amp; $temp &amp;&amp; is_array($temp) &amp;&amp; (1 == count($temp)) ) { <span class="comment">// If we  got a record, then we&#39;ll be updating it.</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                        $sql = <span class="stringliteral">&#39;UPDATE &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                        unset($params_associative_array[<span class="stringliteral">&#39;id&#39;</span>]); <span class="comment">// We remove the ID parameter. That can&#39;t be changed.</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                        </div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                        $params = array_values($params_associative_array);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        $keys = array_keys($params_associative_array);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                        $set_sql = <span class="stringliteral">&#39;&#39;</span>.implode(<span class="stringliteral">&#39;=?,&#39;</span>, $keys).<span class="stringliteral">&#39;=?&#39;</span>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    </div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                        $sql .= <span class="stringliteral">&#39; SET &#39;</span>.$set_sql.<span class="stringliteral">&#39; WHERE (&#39;</span>.$predicate.<span class="stringliteral">&#39;id=&#39;</span>.$id.<span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                        $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, $params, <span class="keyword">true</span>);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                        <span class="keywordflow">if</span> (!$this-&gt;error) {    <span class="comment">// Make sure that we update the access time on cached objects.</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                            <span class="keywordflow">if</span> (isset($this-&gt;_existing_record_objects[$id])) {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                                $this-&gt;_existing_record_objects[$id]-&gt;last_access = strtotime($params_associative_array[<span class="stringliteral">&#39;last_access&#39;</span>]);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                            }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                            $ret = <span class="keyword">true</span>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                        }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        $sql = <span class="stringliteral">&#39;SELECT * FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE id=&#39;</span>.$id; <span class="comment">// Look for a record with the proposed ID (assume we don&#39;t have permission).</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                        $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                        </div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        <span class="keywordflow">if</span> (isset($temp) &amp;&amp; $temp &amp;&amp; is_array($temp) &amp;&amp; count($temp)) { <span class="comment">// If we  got a record, then we&#39;re aborting, as we tried to change an existing rcord.</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                            $this-&gt;error = <span class="keyword">new</span> <a class="code" href="a00359.html">LGV_Error</a>(   <a class="code" href="a00347.html#afbb581ebb4ba7b6dcc7d7b70d00b7c3f">CO_Lang_Common::$pdo_error_code_illegal_write_attempt</a>,</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                                                            <a class="code" href="a00351.html#af697e2504839e0ef49d6b3bf7f3b2182">CO_Lang::$pdo_error_name_illegal_write_attempt</a>,</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                                                            <a class="code" href="a00351.html#a0ee96c3a430321b8eccb7846910ecf5d">CO_Lang::$pdo_error_desc_illegal_write_attempt</a>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                    }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                    $sql = <span class="stringliteral">&#39;SELECT * FROM &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39; WHERE id=1&#39;</span>; <span class="comment">// We simply get the template.</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    $temp = $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, Array());</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    </div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                    <span class="keywordflow">if</span> (isset($temp) &amp;&amp; $temp &amp;&amp; is_array($temp) &amp;&amp; count($temp) ) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                        $sql = <span class="stringliteral">&#39;INSERT INTO &#39;</span>.$this-&gt;table_name.<span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                        unset($params_associative_array[<span class="stringliteral">&#39;id&#39;</span>]);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                        </div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                        <span class="comment">// If there is no read ID specified, it becomes public.</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                        <span class="keywordflow">if</span> (!isset($params_associative_array[<span class="stringliteral">&#39;read_security_id&#39;</span>])) {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                            $params_associative_array[<span class="stringliteral">&#39;read_security_id&#39;</span>] = 0;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                        }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                        </div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                        <span class="comment">// If there is no write ID specified, then we simply take the first one off the list.</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                        <span class="keywordflow">if</span> (!isset($params_associative_array[<span class="stringliteral">&#39;write_security_id&#39;</span>])) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                            $params_associative_array[<span class="stringliteral">&#39;write_security_id&#39;</span>] = $access_ids[1];</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                        }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                        </div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                        <span class="keywordflow">foreach</span> ($params_associative_array as $key =&gt; $value) {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                            <span class="keywordflow">if</span> (isset($temp[$key])) {</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                                $temp[$key] = isset($value) ? $value : NULL;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                            }</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                        }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                        </div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                        $keys = array_keys($params_associative_array);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                    </div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                        $keys_sql = <span class="charliteral">&#39;(&#39;</span>.implode(<span class="charliteral">&#39;,&#39;</span>, $keys).<span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                        $values_sql = <span class="charliteral">&#39;(&#39;</span>.implode(<span class="charliteral">&#39;,&#39;</span>, array_map(<span class="keyword">function</span>($in){<span class="keywordflow">return</span> <span class="charliteral">&#39;?&#39;</span>;}, $keys)).<span class="stringliteral">&#39;) RETURNING id;&#39;</span>;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                        </div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                        $sql .= <span class="stringliteral">&quot; $keys_sql VALUES $values_sql&quot;</span>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                        $this-&gt;<a class="code" href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">execute_query</a>($sql, array_values($params_associative_array), <span class="keyword">true</span>);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                        </div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                        <span class="keywordflow">if</span> (!$this-&gt;error) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                            <span class="comment">// Get the ID of the new row we just created.</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                            $ret = $this-&gt;_pdo_object-&gt;last_insert;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                        }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                        $this-&gt;error = <span class="keyword">new</span> <a class="code" href="a00359.html">LGV_Error</a>(   <a class="code" href="a00347.html#afbb581ebb4ba7b6dcc7d7b70d00b7c3f">CO_Lang_Common::$pdo_error_code_illegal_write_attempt</a>,</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                                                        <a class="code" href="a00351.html#af697e2504839e0ef49d6b3bf7f3b2182">CO_Lang::$pdo_error_name_illegal_write_attempt</a>,</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                                        <a class="code" href="a00351.html#a0ee96c3a430321b8eccb7846910ecf5d">CO_Lang::$pdo_error_desc_illegal_write_attempt</a>);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                    }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                </div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keywordflow">return</span> $ret;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div><div class="ttc" id="a00307_html_a2396849660aa4ff018ab7509a4badeb5"><div class="ttname"><a href="a00307.html#a2396849660aa4ff018ab7509a4badeb5">A_CO_DB\execute_query</a></div><div class="ttdeci">execute_query( $in_sql, $in_parameters=NULL, $exec_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00287">a_co_db.class.php:287</a></div></div>
<div class="ttc" id="a00359_html"><div class="ttname"><a href="a00359.html">LGV_Error</a></div><div class="ttdoc">This class provides a general error report, with file, method and error information. </div><div class="ttdef"><b>Definition:</b> <a href="a00182_source.html#l00032">error.class.php:32</a></div></div>
<div class="ttc" id="a00347_html_afbb581ebb4ba7b6dcc7d7b70d00b7c3f"><div class="ttname"><a href="a00347.html#afbb581ebb4ba7b6dcc7d7b70d00b7c3f">CO_Lang_Common\$pdo_error_code_illegal_write_attempt</a></div><div class="ttdeci">static $pdo_error_code_illegal_write_attempt</div><div class="ttdef"><b>Definition:</b> <a href="a00382_source.html#l00045">common.inc.php:45</a></div></div>
<div class="ttc" id="a00351_html_a0ee96c3a430321b8eccb7846910ecf5d"><div class="ttname"><a href="a00351.html#a0ee96c3a430321b8eccb7846910ecf5d">CO_Lang\$pdo_error_desc_illegal_write_attempt</a></div><div class="ttdeci">static $pdo_error_desc_illegal_write_attempt</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00042">en.php:42</a></div></div>
<div class="ttc" id="a00351_html_af697e2504839e0ef49d6b3bf7f3b2182"><div class="ttname"><a href="a00351.html#af697e2504839e0ef49d6b3bf7f3b2182">CO_Lang\$pdo_error_name_illegal_write_attempt</a></div><div class="ttdeci">static $pdo_error_name_illegal_write_attempt</div><div class="ttdef"><b>Definition:</b> <a href="a00397_source.html#l00041">en.php:41</a></div></div>
<div class="ttc" id="a00307_html_ad2356dbed1b38898d8c17bcd8eb405ef"><div class="ttname"><a href="a00307.html#ad2356dbed1b38898d8c17bcd8eb405ef">A_CO_DB\_create_security_predicate</a></div><div class="ttdeci">_create_security_predicate( $write=false)</div><div class="ttdef"><b>Definition:</b> <a href="a00149_source.html#l00162">a_co_db.class.php:162</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00307_acac7eadbd231d714f3eed150eec35838_cgraph.svg" width="635" height="162"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aabeac345c845e7b7f481149b234641bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabeac345c845e7b7f481149b234641bb">&#9670;&nbsp;</a></span>$_existing_record_objects</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::$_existing_record_objects</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00052">52</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

</div>
</div>
<a id="a6ff3c27bf8ac1bf1370aeeb6b7835d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ff3c27bf8ac1bf1370aeeb6b7835d3c">&#9670;&nbsp;</a></span>$_pdo_object</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::$_pdo_object</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00051">51</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

</div>
</div>
<a id="a83fd5822487fa194ff0b617d90d747fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83fd5822487fa194ff0b617d90d747fc">&#9670;&nbsp;</a></span>$access_object</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::$access_object</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00053">53</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

</div>
</div>
<a id="ad57301d61a2e22a1e3f843fc8d71b690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad57301d61a2e22a1e3f843fc8d71b690">&#9670;&nbsp;</a></span>$class_description</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::$class_description</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00054">54</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

</div>
</div>
<a id="a0195e339191feef610d1cdf09af95d84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0195e339191feef610d1cdf09af95d84">&#9670;&nbsp;</a></span>$error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::$error</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00055">55</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

</div>
</div>
<a id="a256ce7dee5ecb0146b3974a762f02795"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256ce7dee5ecb0146b3974a762f02795">&#9670;&nbsp;</a></span>$table_name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A_CO_DB::$table_name</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00149_source.html#l00056">56</a> of file <a class="el" href="a00149_source.html">a_co_db.class.php</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
